{{- define "push-config.json" -}}
{
    "ListenAddress":":8066",
    "ThrottlePerSec":300,
    "ThrottleMemoryStoreSize":50000,
    "ThrottleVaryByHeader":"X-Forwarded-For",
    "EnableMetrics": false,
    "ApplePushSettings":[
        {
            "Type":"apple",
            "ApplePushUseDevelopment":false,
	    {{- if eq .Values.appleCertPath "" }}
            "ApplePushCertPrivate":"",
            {{- else }}
            "ApplePushCertPrivate": "/certs/apple-push-cert.pem",
	    {{- end }}
            "ApplePushCertPassword":"{ .Values.appleCertPassword }}",
            "ApplePushTopic":"com.mattermost.Mattermost"
        },
        {
            "Type":"apple_rn",
            "ApplePushUseDevelopment":false,
	    {{- if eq .Values.appleCertPath "" }}
            "ApplePushCertPrivate":"",
            {{- else }}
            "ApplePushCertPrivate": "/certs/apple-push-cert.pem",
            {{- end }}
            "ApplePushCertPassword":"{{ .Values.appleCertPassword }}",
            "ApplePushTopic":"com.mattermost.react.native"
        }
    ],
    "AndroidPushSettings":[
        {
            "Type":"android",
            "AndroidApiKey":"{{ .Values.androidApiKey }}"
        },
        {
            "Type":"android_rn",
            "AndroidApiKey":"{{ .Values.androidApiKey }}"
        }
    ]
}
{{- end -}}
